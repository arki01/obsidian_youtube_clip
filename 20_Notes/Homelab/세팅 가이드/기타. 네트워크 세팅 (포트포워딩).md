---
Created: 2025-12-25 17:12
tags:
  - AI/개발
---
# 개요

이 문서는 **포트포워딩 방식으로 외부에서 홈랩에 접속하는 방법**을 초보자도 이해할 수 있도록 단계별로 설명한 메뉴얼이다.  
목표는 다음과 같다.

- 집 밖(회사, 카페)에서 **홈랩 VM에 접속**
    
- **Proxmox 자체는 외부에 노출하지 않음**
    
- 보안 리스크를 최소화한 **연습용 외부 접속 환경 구성**
    

> 이 방식은 **임시/학습용**이며,  
> 최종적으로는 VPN 방식으로 전환하는 것을 권장한다.

---

# 전체 구조 한눈에 보기

```
[외부 PC / 회사]
        ↓ (공인 IP + 포트)
[집 공유기]
        ↓ (포트포워딩)
[홈랩 서버 (Proxmox)]
        └─ VM (Ubuntu 등)
```

- 외부에서는 **공유기까지만 보임**
    
- 공유기가 요청을 받아서 **특정 VM으로 전달**
    
- Proxmox 관리 화면은 내부에서만 사용
    

---

# 준비물 체크리스트

## 필수

- 인터넷 회선 (이미 설치됨)
    
- 집 공유기 (단자함에 설치 완료)
    
- Proxmox 설치 완료
    
- 외부에서 접속할 노트북 또는 PC
    

---

# 1. 현재 내부 네트워크 상태 확인

## 1-1. Proxmox 접속 확인 (집 안에서)

브라우저 주소창에 아래 입력:

```
https://192.168.0.10:8006/
```

정상이라면:

- Proxmox 로그인 화면이 뜸
    
- 이 주소는 **집 안에서만 접속 가능**
    

중요:

- 이 주소를 **외부에서 접속하려고 하면 안 됨**
    
- 포트포워딩 설정도 하지 않음
    

---

## 1-2. IP 구조 이해 (아주 간단히)

```
공유기 IP: 192.168.0.1
Proxmox: 192.168.0.10
VM들: 192.168.0.20 ~
```

- `192.168.x.x`는 **집 안에서만 쓰는 주소**
    
- 외부에서는 절대 직접 접근 불가
    

---

# 2. 외부에서 “무엇에” 접속할지 결정

포트포워딩에서 가장 중요한 단계다.

## 절대 외부에 열면 안 되는 것

- Proxmox 관리 화면 (8006)
    
- Proxmox SSH
    
- 공유기 관리 화면
    

## 외부 접속 대상으로 사용할 것

- **VM 1대**
    
- 용도: SSH 접속 또는 테스트용 서비스
    

예시:

- Ubuntu Server VM
    
- IP: `192.168.0.20`
    

---

# 3. 외부 접속용 VM 준비

## 3-1. VM IP 확인

Proxmox에서 VM 선택 → Network 확인  
또는 VM 안에서:

```bash
ip a
```

예시 결과:

```
192.168.0.20
```

---

## 3-2. SSH 포트 변경 (권장)

기본 SSH 포트(22)는 위험하므로 바꾼다.

VM 안에서 실행:

```bash
sudo nano /etc/ssh/sshd_config
```

아래 줄을 찾아 수정:

```
Port 2222
```

저장 후 재시작:

```bash
sudo systemctl restart ssh
```

이제 이 VM은 **2222 포트로만 SSH 접속 가능**

---

# 4. 공유기 포트포워딩 설정

이제 공유기 설정 화면으로 이동한다.

## 4-1. 공유기 관리자 접속

브라우저에서:

```
http://192.168.0.1
```

(공유기 관리자 주소)

---

## 4-2. 포트포워딩 메뉴 찾기

보통 이름은 다음 중 하나:

- 포트포워딩
    
- NAT 설정
    
- 가상 서버
    

---

## 4-3. 포트포워딩 규칙 추가 (SSH)

아래처럼 **1개만 추가**

|항목|값|
|---|---|
|외부 포트|2222|
|내부 IP|192.168.0.20|
|내부 포트|2222|
|프로토콜|TCP|

의미:

```
외부에서 2222로 들어오면
→ 192.168.0.20:2222 로 전달
```

---

# 5. 외부에서 접속 테스트

집 밖 네트워크(회사, LTE 핫스팟 등)에서 실행

```bash
ssh -p 2222 user@공인IP
```

공인 IP 확인 방법:

- 공유기 상태 페이지
    
- “내 IP 확인” 검색
    

정상이라면:

- VM 로그인 성공
    
- Proxmox에는 여전히 접근 불가 (정상)
    

---

# 6. 보안상 반드시 지킬 것

## 절대 하지 말 것

- 8006 포트 포워딩
    
- 22 포트 그대로 사용
    
- 여러 포트 한꺼번에 개방
    

## 권장 습관

- 테스트 끝나면 포트포워딩 삭제
    
- 외부 접속 필요 없을 때는 닫기
    
- 이 구조는 “연습용”으로만 사용
    

---

# 7. 지금 단계에서 가능한 것 / 불가능한 것

## 가능한 것

- 외부에서 VM 접속
    
- 간단한 서버 테스트
    
- 홈랩 개념 이해
    

## 불가능한 것 (일부러 막은 것)

- 외부에서 Proxmox 관리
    
- 안전한 장기 운영
    

---

# 8. 다음 단계 예고

이제 다음 단계로 자연스럽게 넘어갈 수 있다.

- 포트포워딩 없이 외부 접속하는 방법
    
- 집 네트워크에 “들어오는” 방식
    
- 보안 걱정 없는 구조
    

다음으로 가고 싶으면 이렇게 말해줘:

> “다음은 VPN 방식으로 넘어가자”

그러면 **지금 구조를 그대로 활용해서**  
WireGuard 기준 메뉴얼을 이어서 만들어줄게.